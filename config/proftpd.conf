# --- MODULES ---
Include /etc/proftpd/modules.conf

# --- SERVER SETTINGS ---
ServerName "ProFTPD"
ServerType standalone
DefaultServer on
Port 21
Umask 000

# --- NETWORK & PASSIVE MODE FIX ---
# 1. Define the ports
PassivePorts 60000 60100

# 2. Allow connections from Docker neighbors (CRITICAL FIX)
AllowForeignAddress on

# 3. Disable Masquerade (Ensure we use Internal IP)
# MasqueradeAddress 1.2.3.4 

# --- AUTHENTICATION ---
AuthUserFile /etc/proftpd/ftpd.passwd
AuthOrder mod_auth_file.c
RequireValidShell off

# --- JAIL (See Neighbors) ---
DefaultRoot /home/ftp

# --- PERMISSIONS ---
# Allow everything everywhere first (to test)
<Directory />
  <Limit ALL>
    AllowAll
  </Limit>
</Directory>
